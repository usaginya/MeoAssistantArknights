# 肉鸽战斗流程协议

`resource/roguelike/*.json` 的使用方法及各字段说明

## 完整字段一览

```jsonc
{
    "stage_name": "驯兽小屋",        // 关卡名，必选
    "actions": [                    // 战斗中的操作。有序，执行完前一个才会去执行下一个。必选
        {
            "type": "部署",         // 操作类型，可选，默认 "Deploy"
                                    // "Deploy" | "Skill" | "Retreat" | "AllSkill"
                                    // "部署"   |  "技能"  |  "撤退"   | "全部技能"
                                    // 中英文皆可，效果相同
                                    // 若为 "部署", 当费用不够时，会一直等待到费用够
                                    // 若为 "技能", 当技能 cd 没转好时，会直接跳过当前项。
                                    // 考虑不同干员技能效果及 cd 差异巨大，谨慎使用（例如 山 2 技能 这种，假如已经开了，你又开一次，就给关了）
                                    // "全部技能", 会一次性使用所有 skill_usgae == 3 的干员的技能

            "kills": 0,             // 击杀数条件，如果没达到就一直等待。可选，默认为 0。直接执行
            // TODO: 其他条件
            // TODO: "condition_type": 0,    // 执行条件间的关系，可选，默认 0
            //                        // 0 - 且； 1 - 或

            "roles": [              // 该位置使用的职业。可选，默认为空，任何职业都可以
                                    // 有序，会先使用靠前的职业
                                    // 会根据位置类型自动区分是高台还是地面。若设置了不可放置的职业，则忽略该职业
                                    // 如果这里面的职业一个都没有，则会跳过该位置转而执行下一条
                "近卫",
                "先锋",
                "重装",
                "召唤物"
            ],
            
            "waiting_cost": false,  // 如果有 roles 中有靠前的职业，但费用不够，是否等待。可选，默认 false
                                    // 为 true 时，会使用 roles 中，当前有的、最靠前的职业（一直等他费用够）
                                    // 为 false 时，会使用 roles 中，当前有的、费用够的中最靠前的职业

            "location": [ 5, 5 ],   // 操作的干员的位置。必选

            "direction": "左",      // 部署干员的干员朝向。 type 为 "部署" 时必选
                                    // "Left" | "Right" | "Up" | "Down" | "None"
                                    // "左"   |  "右"   | "上"  | "下"   |  "无"
                                    // 中英文皆可，效果相同

            "pre_delay": 0,         // 前置延时。可选，默认 0, 单位毫秒
            "rear_delay": 0,        // 后置延时。可选，默认 0, 单位毫秒

            "timeout": 999999999    // 超时时间。当 type 为 "部署" 时可选。默认 INT_MAX, 单位毫秒
                                    // 等待超时则放弃当前动作, 转而执行下一个动作
        },
        {                           // 简单举例
            "location": [6, 6],
            "roles": [
                "近卫",
                "先锋",
                "重装",
                "召唤物"
            ],
            "direction": "左"
        }
    ]
}
```
